# Используем более новую версию Node.js, совместимую с Vite
FROM node:20-slim

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем package.json и package-lock.json для установки зависимостей
# Это кэширует зависимости, если они не менялись
COPY package*.json ./

# Устанавливаем зависимости
RUN npm install

# Копируем остальные файлы исходного кода
COPY . .

# Открываем порт для сервера разработки
EXPOSE 3000

# Запускаем сервер для разработки на нужном порту и хосте
# Двойное тире (--) передает флаги --host и --port напрямую в Vite
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "3000"]