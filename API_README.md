# API Quick Start Guide

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **URL:** `http://localhost:8501/api`
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Bearer Token (JWT)
- **–§–æ—Ä–º–∞—Ç:** JSON

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

```bash
curl -X POST http://localhost:8501/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "password": "password123"
  }'
```

–û—Ç–≤–µ—Ç:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {...}
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

```bash
curl http://localhost:8501/api/projects \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

---

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /auth/login` - –í—Ö–æ–¥
- `GET /auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

### –ü—Ä–æ–µ–∫—Ç—ã
- `GET /projects` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
- `POST /projects` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
- `GET /projects/{id}` - –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
- `PUT /projects/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### –ó–∞–¥–∞—á–∏
- `GET /tasks` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `POST /tasks` - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- `PATCH /projects/{pid}/tasks/{tid}` - –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É üìç
- `POST /projects/{pid}/tasks/{tid}/verify` - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å

### –ù–∞—Ä—É—à–µ–Ω–∏—è
- `GET /issues` - –°–ø–∏—Å–æ–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–π
- `POST /projects/{id}/issues` - –°–æ–∑–¥–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ üìç
- `PATCH /issues/{id}` - –ó–∞–∫—Ä—ã—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ

### –î–æ–∫—É–º–µ–Ω—Ç—ã
- `POST /documents/upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç üìç
- `POST /documents/recognize` - –†–∞—Å–ø–æ–∑–Ω–∞—Ç—å –¢–¢–ù
- `PUT /documents/{id}/data` - –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
- `DELETE /documents/{id}` - –£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

### –û—Ç—á–µ—Ç—ã
- `GET /daily-reports` - –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤
- `POST /daily-reports` - –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç üìç

### –ü–æ—Å—Ç–∞–≤–∫–∏
- `GET /projects/{id}/deliveries` - –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–∞–≤–æ–∫
- `POST /deliveries` - –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É
- `DELETE /deliveries/{id}` - –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç–∞–≤–∫—É

### –î–∞—à–±–æ—Ä–¥—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /dashboard` - –î–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥–∞
- `GET /map` - –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞—Ä—Ç—ã
- `GET /analytics/projects/{id}` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

üìç - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏–∫—Å–∞—Ü–∏–µ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

---

## üîê –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∞ |
|------|----------|----------------|
| `client` | –ó–∞–∫–∞–∑—á–∏–∫ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á |
| `foreman` | –ü—Ä–æ—Ä–∞–± | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, –æ—Ç—á–µ—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã |
| `inspector` | –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞—Ä—É—à–µ–Ω–∏–π, –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ |

---

## üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞

–§–æ—Ä–º–∞—Ç: `"latitude,longitude"` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `"55.751244,37.618423"`)

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
curl -X POST http://localhost:8501/api/projects \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –º–æ—Å—Ç–∞",
    "address": "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 1",
    "polygon": {
      "type": "Feature",
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[37.61, 55.75], [37.62, 55.75], [37.62, 55.76], [37.61, 55.76], [37.61, 55.75]]]
      }
    }
  }'
```

### –ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–¥–∞—á—É —Å —Ñ–æ—Ç–æ

```bash
curl -X PATCH http://localhost:8501/api/projects/1/tasks/5 \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "status=completed" \
  -F "comment=–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞" \
  -F "geolocation=55.751244,37.618423" \
  -F "photos=@/path/to/photo1.jpg" \
  -F "photos=@/path/to/photo2.jpg"
```

### –°–æ–∑–¥–∞—Ç—å –Ω–∞—Ä—É—à–µ–Ω–∏–µ

```bash
curl -X POST http://localhost:8501/api/projects/1/issues \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "violation",
    "description": "–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
    "classifier_id": 5,
    "due_date": "2025-01-25",
    "geolocation": "55.751244,37.618423"
  }'
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –¢–¢–ù

```bash
curl -X POST http://localhost:8501/api/documents/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "file=@/path/to/ttn.pdf" \
  -F "project_id=1" \
  -F "file_type=ttn" \
  -F "geolocation=55.751244,37.618423"
```

---

## üîÑ –°—Ç–∞—Ç—É—Å—ã

### –ó–∞–¥–∞—á–∏
- `pending` - –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `in_progress` - –í —Ä–∞–±–æ—Ç–µ
- `completed` - –í—ã–ø–æ–ª–Ω–µ–Ω–∞
- `verified` - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞
- `rejected` - –û—Ç–∫–ª–æ–Ω–µ–Ω–∞

### –ü—Ä–æ–µ–∫—Ç—ã
- `pending` - –ù–µ –∞–∫—Ç–∏–≤–µ–Ω
- `active` - –ê–∫—Ç–∏–≤–Ω—ã–π
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω

### –ù–∞—Ä—É—à–µ–Ω–∏—è
- `open` - –û—Ç–∫—Ä—ã—Ç–æ
- `resolved` - –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ

### –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `pending` - –û–∂–∏–¥–∞–µ—Ç
- `processing` - –í –æ–±—Ä–∞–±–æ—Ç–∫–µ
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- `failed` - –û—à–∏–±–∫–∞

---

## ‚ö†Ô∏è –ö–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----|----------|
| 200 | OK |
| 201 | Created |
| 400 | Bad Request |
| 401 | Unauthorized |
| 403 | Forbidden |
| 404 | Not Found |
| 500 | Server Error |

---

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º–æ—Ç—Ä–∏—Ç–µ [API_DOCUMENTATION.md](./API_DOCUMENTATION.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
docker-compose up -d
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker-compose logs -f backend
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ HTTPie
pip install httpie

# –í—Ö–æ–¥
http POST localhost:8501/api/auth/login email=user@example.com password=pass123

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
http GET localhost:8501/api/projects "Authorization:Bearer TOKEN"
```
